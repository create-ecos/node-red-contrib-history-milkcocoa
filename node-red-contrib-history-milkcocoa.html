<script type="text/javascript">
    RED.nodes.registerType('node-red-contrib-history-milkcocoa',{
        category: 'function',
        color: '#a5a5a5',
		defaults: {
            name: {value:""},
			app_id: { value: "", required: false },
			api_key: { value: "", required: false },
			api_secret: { value: "", required: false },
			data_store: { value: "", required: false },
			span_start: { value: "", required: false },
			span_end: { value: "", required: false },
		},
        inputs:1,
        outputs:1,
        icon: "mb.png",
        label: function() {
			return this.name||"node-red-contrib-history-milkcocoa";
        }
    });
</script>

<script type="text/x-red" data-template-name="node-red-contrib-history-milkcocoa">
	<div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
	<div class="form-row">
		<label for="node-input-app_id"><i class="fa fa-globe"></i> applicationID</label>
		<input type="text" id="node-input-app_id" placeholder="applicationID">
	</div>
	<div class="form-row">
		<label for="node-input-api_key"><i class="fa fa-key"></i> API Key</label>
		<input type="text" id="node-input-api_key" placeholder="API Key">
	</div>
	<div class="form-row">
		<label for="node-input-api_secret"><i class="fa fa-key"></i> API Secret</label>
		<input type="text" id="node-input-api_secret" placeholder="API Secret">
	</div>
	<div class="form-row">
		<label for="node-span_start"><i class="fa fa-building"></i> Size</label>
		<input type="text" id="node-span_start" placeholder="Span[start]">
	</div>
	<div class="form-row">
		<label for="node-span_end"><i class="fa fa-building"></i> Size</label>
		<input type="text" id="node-span_end" placeholder="Span[end]">
	</div>
</script>

<script type="text/x-red" data-help-name="node-red-contrib-history-milkcocoa">
    <p>Milkcocoaのデータストアから範囲を指定してhistory()するノードです。現状、APIキーによる認証のみ対応しています。</p>
    <p>パラメータは次の通りです。</p>
    <ul>
    	<li><code>app_id</code> : applicationID(xxxxxx.mlkcca.com)</li>
    	<li><code>api_key</code> : api key</li>
    	<li><code>api_secret</code> : api secret</li>
    	<li><code>data_store</code> : データストア名</li>
    	<li><code>span_start</code> : 開始時間</li>
    	<li><code>span_end</code> : 終了時間</li>
    </ul>
    <p>パラメータはmsg.mlkccaで同様に定義することができ、画面の設定よりも優先されます。</p>
    <p>例 : <code>msg.mlkcca = {app_id:'xxx', api_key:'yyy', api_secret:'zzz', data_store:'www'}</code></p>
</script>

